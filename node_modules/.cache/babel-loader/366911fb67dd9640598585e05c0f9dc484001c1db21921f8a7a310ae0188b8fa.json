{"ast":null,"code":"var _s = $RefreshSig$();\nimport { db } from '../firebase/config';\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, signOut } from 'firebase/auth';\nimport { useState, useEffect } from 'react';\nexport const useAuthentication = () => {\n  _s();\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(null);\n\n  //cleanup\n  //deal with memory leak\n  const [cancelled, setCancelled] = useState(false);\n  function checkIfIsCancelled() {\n    if (cancelled) {\n      return;\n    }\n  }\n  const auth = getAuth();\n  const createUser = async data => {\n    checkIfIsCancelled();\n    setLoading(true);\n    try {\n      const {\n        user\n      } = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await updateProfile(user, {\n        displayName: data.displayName\n      });\n      return user;\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      let systemErrorMessage;\n      if (error.message.includes(\"Password\")) {\n        systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres\";\n      } else if (error.message.includes('email-already')) {\n        systemErrorMessage = \"E-mail já cadastrado\";\n      }\n    }\n    setLoading(false);\n  };\n  useEffect(() => setCancelled(true), []);\n  return {\n    auth,\n    createUser,\n    error,\n    loading\n  };\n};\n_s(useAuthentication, \"yWXVTuDKNAg0zWE6NWxrVR64XF0=\");","map":{"version":3,"names":["db","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","signOut","useState","useEffect","useAuthentication","_s","error","setError","loading","setLoading","cancelled","setCancelled","checkIfIsCancelled","auth","createUser","data","user","email","password","displayName","console","log","message","systemErrorMessage","includes"],"sources":["C:/Users/luiz7/Desktop/Code/Curso 2023/miniblog/src/hooks/useAuthentication.js"],"sourcesContent":["import {db} from '../firebase/config'\r\n\r\nimport {\r\n    getAuth,\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword,\r\n    updateProfile,\r\n    signOut\r\n} from 'firebase/auth'\r\n\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport const useAuthentication = () => {\r\n\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(null)\r\n\r\n    //cleanup\r\n    //deal with memory leak\r\n    const [cancelled, setCancelled] = useState(false)\r\n    function checkIfIsCancelled() {\r\n        if (cancelled) {\r\n            return\r\n        }\r\n    }\r\n\r\n    const auth = getAuth()\r\n\r\n\r\n    const createUser = async (data) => {\r\n        checkIfIsCancelled()\r\n        setLoading(true)\r\n\r\n        try {\r\n            const { user } = await createUserWithEmailAndPassword(\r\n                auth,\r\n                data.email,\r\n                data.password\r\n            )\r\n\r\n            await updateProfile(user, {\r\n                displayName: data.displayName\r\n            })\r\n\r\n            return user\r\n\r\n        } catch (error) {\r\n\r\n            console.log(error.message)\r\n            console.log(typeof error.message)\r\n\r\n            let systemErrorMessage\r\n\r\n            if(error.message.includes(\"Password\")){\r\n                systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres\"\r\n            }else if(error.message.includes('email-already')){\r\n                systemErrorMessage = \"E-mail já cadastrado\"\r\n            }\r\n\r\n        }\r\n\r\n        setLoading(false)\r\n    }\r\n\r\n    useEffect(() => setCancelled(true),[])\r\n\r\n    return {auth, createUser, error, loading}\r\n\r\n}"],"mappings":";AAAA,SAAQA,EAAE,QAAO,oBAAoB;AAErC,SACIC,OAAO,EACPC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,aAAa,EACbC,OAAO,QACJ,eAAe;AAEtB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAO,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAEnC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;;EAE5C;EACA;EACA,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACjD,SAASU,kBAAkBA,CAAA,EAAG;IAC1B,IAAIF,SAAS,EAAE;MACX;IACJ;EACJ;EAEA,MAAMG,IAAI,GAAGhB,OAAO,EAAE;EAGtB,MAAMiB,UAAU,GAAG,MAAOC,IAAI,IAAK;IAC/BH,kBAAkB,EAAE;IACpBH,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MACA,MAAM;QAAEO;MAAK,CAAC,GAAG,MAAMlB,8BAA8B,CACjDe,IAAI,EACJE,IAAI,CAACE,KAAK,EACVF,IAAI,CAACG,QAAQ,CAChB;MAED,MAAMlB,aAAa,CAACgB,IAAI,EAAE;QACtBG,WAAW,EAAEJ,IAAI,CAACI;MACtB,CAAC,CAAC;MAEF,OAAOH,IAAI;IAEf,CAAC,CAAC,OAAOV,KAAK,EAAE;MAEZc,OAAO,CAACC,GAAG,CAACf,KAAK,CAACgB,OAAO,CAAC;MAC1BF,OAAO,CAACC,GAAG,CAAC,OAAOf,KAAK,CAACgB,OAAO,CAAC;MAEjC,IAAIC,kBAAkB;MAEtB,IAAGjB,KAAK,CAACgB,OAAO,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAC;QAClCD,kBAAkB,GAAG,gDAAgD;MACzE,CAAC,MAAK,IAAGjB,KAAK,CAACgB,OAAO,CAACE,QAAQ,CAAC,eAAe,CAAC,EAAC;QAC7CD,kBAAkB,GAAG,sBAAsB;MAC/C;IAEJ;IAEAd,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC;EAEDN,SAAS,CAAC,MAAMQ,YAAY,CAAC,IAAI,CAAC,EAAC,EAAE,CAAC;EAEtC,OAAO;IAACE,IAAI;IAAEC,UAAU;IAAER,KAAK;IAAEE;EAAO,CAAC;AAE7C,CAAC;AAAAH,EAAA,CAxDYD,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}