{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luiz.E.Costa/Desktop/Code/Curso/miniblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./CreatePost.module.css\";import{useState}from\"react\";import{useInsertDocument}from\"../../hooks/useInsertDocument\";import{useNavigate}from\"react-router-dom\";import{useAuthValue}from\"../../contexts/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),body=_useState6[0],setBody=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tags=_useState8[0],setTags=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),formError=_useState10[0],setFormError=_useState10[1];var _useAuthValue=useAuthValue(),user=_useAuthValue.user;var navigate=useNavigate();var _useInsertDocument=useInsertDocument(\"posts\"),insertDocument=_useInsertDocument.insertDocument,response=_useInsertDocument.response;var handleSubmit=function handleSubmit(e){e.preventDefault();setFormError(\"\");// validate image\ntry{new URL(image);}catch(error){setFormError(\"A imagem precisa ser uma URL.\");}// create tags array\nvar tagsArray=tags.split(\",\").map(function(tag){return tag.trim().toLowerCase();});// check values\nif(!title||!image||!tags||!body){setFormError(\"Por favor, preencha todos os campos!\");}console.log(tagsArray);console.log({title:title,image:image,body:body,tags:tagsArray,uid:user.uid,createdBy:user.displayName});if(formError)return;insertDocument({title:title,image:image,body:body,tags:tagsArray,uid:user.uid,createdBy:user.displayName});// redirect to home page\nnavigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:styles.create_post,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Criar post\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Escreva sobre o que quiser e compartilhe o seu conhecimento!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"T\\xEDtulo:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"text\",required:true,placeholder:\"Pense num bom t\\xEDtulo...\",onChange:function onChange(e){return setTitle(e.target.value);},value:title})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"URL da imagem:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"image\",required:true,placeholder:\"Insira uma imagem que representa seu post\",onChange:function onChange(e){return setImage(e.target.value);},value:image})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Conte\\xFAdo:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"body\",required:true,placeholder:\"Insira o conte\\xFAdo do post\",onChange:function onChange(e){return setBody(e.target.value);},value:body})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Tags:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tags\",required:true,placeholder:\"Insira as tags separadas por v\\xEDrgula\",onChange:function onChange(e){return setTags(e.target.value);},value:tags})]}),!response.loading&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Criar post!\"}),response.loading&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",disabled:true,children:\"Aguarde.. .\"}),(response.error||formError)&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:response.error||formError})]})]});};export default CreatePost;","map":{"version":3,"names":["styles","useState","useInsertDocument","useNavigate","useAuthValue","jsx","_jsx","jsxs","_jsxs","CreatePost","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","image","setImage","_useState5","_useState6","body","setBody","_useState7","_useState8","tags","setTags","_useState9","_useState10","formError","setFormError","_useAuthValue","user","navigate","_useInsertDocument","insertDocument","response","handleSubmit","e","preventDefault","URL","error","tagsArray","split","map","tag","trim","toLowerCase","console","log","uid","createdBy","displayName","className","create_post","children","onSubmit","type","name","required","placeholder","onChange","target","value","loading","disabled"],"sources":["C:/Users/Luiz.E.Costa/Desktop/Code/Curso/miniblog/src/pages/CreatePost/CreatePost.js"],"sourcesContent":["import styles from \"./CreatePost.module.css\";\n\nimport { useState } from \"react\";\nimport { useInsertDocument } from \"../../hooks/useInsertDocument\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuthValue } from \"../../contexts/AuthContext\";\n\nconst CreatePost = () => {\n  const [title, setTitle] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [tags, setTags] = useState([]);\n  const [formError, setFormError] = useState(\"\");\n\n  const { user } = useAuthValue();\n\n  const navigate = useNavigate();\n\n  const { insertDocument, response } = useInsertDocument(\"posts\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setFormError(\"\");\n\n    // validate image\n    try {\n      new URL(image);\n    } catch (error) {\n      setFormError(\"A imagem precisa ser uma URL.\");\n    }\n\n    // create tags array\n    const tagsArray = tags.split(\",\").map((tag) => tag.trim().toLowerCase());\n\n    // check values\n    if (!title || !image || !tags || !body) {\n      setFormError(\"Por favor, preencha todos os campos!\");\n    }\n\n    console.log(tagsArray);\n\n    console.log({\n      title,\n      image,\n      body,\n      tags: tagsArray,\n      uid: user.uid,\n      createdBy: user.displayName,\n    });\n\n    if(formError) return\n\n    insertDocument({\n      title,\n      image,\n      body,\n      tags: tagsArray,\n      uid: user.uid,\n      createdBy: user.displayName,\n    });\n\n    // redirect to home page\n    navigate(\"/\");\n  };\n\n  return (\n    <div className={styles.create_post}>\n      <h2>Criar post</h2>\n      <p>Escreva sobre o que quiser e compartilhe o seu conhecimento!</p>\n      <form onSubmit={handleSubmit}>\n        <label>\n          <span>Título:</span>\n          <input\n            type=\"text\"\n            name=\"text\"\n            required\n            placeholder=\"Pense num bom título...\"\n            onChange={(e) => setTitle(e.target.value)}\n            value={title}\n          />\n        </label>\n        <label>\n          <span>URL da imagem:</span>\n          <input\n            type=\"text\"\n            name=\"image\"\n            required\n            placeholder=\"Insira uma imagem que representa seu post\"\n            onChange={(e) => setImage(e.target.value)}\n            value={image}\n          />\n        </label>\n        <label>\n          <span>Conteúdo:</span>\n          <textarea\n            name=\"body\"\n            required\n            placeholder=\"Insira o conteúdo do post\"\n            onChange={(e) => setBody(e.target.value)}\n            value={body}\n          ></textarea>\n        </label>\n        <label>\n          <span>Tags:</span>\n          <input\n            type=\"text\"\n            name=\"tags\"\n            required\n            placeholder=\"Insira as tags separadas por vírgula\"\n            onChange={(e) => setTags(e.target.value)}\n            value={tags}\n          />\n        </label>\n        {!response.loading && <button className=\"btn\">Criar post!</button>}\n        {response.loading && (\n          <button className=\"btn\" disabled>\n            Aguarde.. .\n          </button>\n        )}\n        {(response.error || formError) && (\n          <p className=\"error\">{response.error || formError}</p>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default CreatePost;\n"],"mappings":"uIAAA,MAAO,CAAAA,MAAM,KAAM,yBAAyB,CAE5C,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,iBAAiB,KAAQ,+BAA+B,CACjE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,YAAY,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1D,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,IAAAC,SAAA,CAA0BT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA0Bd,QAAQ,CAAC,EAAE,CAAC,CAAAe,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAwBlB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAAwBtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAAkC1B,QAAQ,CAAC,EAAE,CAAC,CAAA2B,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAvCE,SAAS,CAAAD,WAAA,IAAEE,YAAY,CAAAF,WAAA,IAE9B,IAAAG,aAAA,CAAiB3B,YAAY,EAAE,CAAvB4B,IAAI,CAAAD,aAAA,CAAJC,IAAI,CAEZ,GAAM,CAAAC,QAAQ,CAAG9B,WAAW,EAAE,CAE9B,IAAA+B,kBAAA,CAAqChC,iBAAiB,CAAC,OAAO,CAAC,CAAvDiC,cAAc,CAAAD,kBAAA,CAAdC,cAAc,CAAEC,QAAQ,CAAAF,kBAAA,CAARE,QAAQ,CAEhC,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1BA,CAAC,CAACC,cAAc,EAAE,CAClBT,YAAY,CAAC,EAAE,CAAC,CAEhB;AACA,GAAI,CACF,GAAI,CAAAU,GAAG,CAACvB,KAAK,CAAC,CAChB,CAAE,MAAOwB,KAAK,CAAE,CACdX,YAAY,CAAC,+BAA+B,CAAC,CAC/C,CAEA;AACA,GAAM,CAAAY,SAAS,CAAGjB,IAAI,CAACkB,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACC,IAAI,EAAE,CAACC,WAAW,EAAE,GAAC,CAExE;AACA,GAAI,CAAClC,KAAK,EAAI,CAACI,KAAK,EAAI,CAACQ,IAAI,EAAI,CAACJ,IAAI,CAAE,CACtCS,YAAY,CAAC,sCAAsC,CAAC,CACtD,CAEAkB,OAAO,CAACC,GAAG,CAACP,SAAS,CAAC,CAEtBM,OAAO,CAACC,GAAG,CAAC,CACVpC,KAAK,CAALA,KAAK,CACLI,KAAK,CAALA,KAAK,CACLI,IAAI,CAAJA,IAAI,CACJI,IAAI,CAAEiB,SAAS,CACfQ,GAAG,CAAElB,IAAI,CAACkB,GAAG,CACbC,SAAS,CAAEnB,IAAI,CAACoB,WAClB,CAAC,CAAC,CAEF,GAAGvB,SAAS,CAAE,OAEdM,cAAc,CAAC,CACbtB,KAAK,CAALA,KAAK,CACLI,KAAK,CAALA,KAAK,CACLI,IAAI,CAAJA,IAAI,CACJI,IAAI,CAAEiB,SAAS,CACfQ,GAAG,CAAElB,IAAI,CAACkB,GAAG,CACbC,SAAS,CAAEnB,IAAI,CAACoB,WAClB,CAAC,CAAC,CAEF;AACAnB,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,mBACEzB,KAAA,QAAK6C,SAAS,CAAErD,MAAM,CAACsD,WAAY,CAAAC,QAAA,eACjCjD,IAAA,OAAAiD,QAAA,CAAI,YAAU,EAAK,cACnBjD,IAAA,MAAAiD,QAAA,CAAG,8DAA4D,EAAI,cACnE/C,KAAA,SAAMgD,QAAQ,CAAEnB,YAAa,CAAAkB,QAAA,eAC3B/C,KAAA,UAAA+C,QAAA,eACEjD,IAAA,SAAAiD,QAAA,CAAM,YAAO,EAAO,cACpBjD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,MAAM,CACXC,QAAQ,MACRC,WAAW,CAAC,4BAAyB,CACrCC,QAAQ,CAAE,SAAAA,SAACvB,CAAC,QAAK,CAAAxB,QAAQ,CAACwB,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAC,EAAC,CAC1CA,KAAK,CAAElD,KAAM,EACb,GACI,cACRL,KAAA,UAAA+C,QAAA,eACEjD,IAAA,SAAAiD,QAAA,CAAM,gBAAc,EAAO,cAC3BjD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,OAAO,CACZC,QAAQ,MACRC,WAAW,CAAC,2CAA2C,CACvDC,QAAQ,CAAE,SAAAA,SAACvB,CAAC,QAAK,CAAApB,QAAQ,CAACoB,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAC,EAAC,CAC1CA,KAAK,CAAE9C,KAAM,EACb,GACI,cACRT,KAAA,UAAA+C,QAAA,eACEjD,IAAA,SAAAiD,QAAA,CAAM,cAAS,EAAO,cACtBjD,IAAA,aACEoD,IAAI,CAAC,MAAM,CACXC,QAAQ,MACRC,WAAW,CAAC,8BAA2B,CACvCC,QAAQ,CAAE,SAAAA,SAACvB,CAAC,QAAK,CAAAhB,OAAO,CAACgB,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAC,EAAC,CACzCA,KAAK,CAAE1C,IAAK,EACF,GACN,cACRb,KAAA,UAAA+C,QAAA,eACEjD,IAAA,SAAAiD,QAAA,CAAM,OAAK,EAAO,cAClBjD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,MAAM,CACXC,QAAQ,MACRC,WAAW,CAAC,yCAAsC,CAClDC,QAAQ,CAAE,SAAAA,SAACvB,CAAC,QAAK,CAAAZ,OAAO,CAACY,CAAC,CAACwB,MAAM,CAACC,KAAK,CAAC,EAAC,CACzCA,KAAK,CAAEtC,IAAK,EACZ,GACI,CACP,CAACW,QAAQ,CAAC4B,OAAO,eAAI1D,IAAA,WAAQ+C,SAAS,CAAC,KAAK,CAAAE,QAAA,CAAC,aAAW,EAAS,CACjEnB,QAAQ,CAAC4B,OAAO,eACf1D,IAAA,WAAQ+C,SAAS,CAAC,KAAK,CAACY,QAAQ,MAAAV,QAAA,CAAC,aAEjC,EACD,CACA,CAACnB,QAAQ,CAACK,KAAK,EAAIZ,SAAS,gBAC3BvB,IAAA,MAAG+C,SAAS,CAAC,OAAO,CAAAE,QAAA,CAAEnB,QAAQ,CAACK,KAAK,EAAIZ,SAAS,EAClD,GACI,GACH,CAEV,CAAC,CAED,cAAe,CAAApB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}